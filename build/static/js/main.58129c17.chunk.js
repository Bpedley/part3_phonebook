(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(41)},21:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(15),c=t.n(u),l=(t(21),t(4)),o=t(5),i=t(2),m=function(e){var n=e.searchValue,t=e.handleInputChange;return r.a.createElement("label",null,"filter shown with",r.a.createElement("input",{name:"filter",value:n,onChange:t}))},s=function(e){var n=e.handleSubmit,t=e.handleInputChange,a=e.newPerson,u=a.name,c=a.number;return r.a.createElement("form",{onSubmit:n},r.a.createElement("label",null,"name:",r.a.createElement("input",{name:"name",value:u,onChange:t})),r.a.createElement("br",null),r.a.createElement("label",null,"number:",r.a.createElement("input",{name:"number",value:c,onChange:t})),r.a.createElement("br",null),r.a.createElement("button",null,"add"))},f=function(e){var n=e.person,t=n.name,a=n.number,u=n.id,c=e.deletePerson;return r.a.createElement("div",null,r.a.createElement("p",{style:{display:"inline-block"}},t," ",a),r.a.createElement("button",{onClick:function(){return c(u)}},"delete"))},d=function(e){var n=e.filteredPersons,t=e.deletePerson;return r.a.createElement("div",null,n.length?n.map((function(e){return r.a.createElement(f,{key:e.id,person:e,deletePerson:t})})):r.a.createElement("p",null,"No matches"))},b=t(22),h=function(e){var n=e.error,t=e.success;return null===n&&null===t?null:r.a.createElement("div",{className:b("notification",{error:n,success:t})},n||t)},p=t(3),E=t.n(p),v="/api/persons",w=function(){return E.a.get(v).then((function(e){return e.data}))},O=function(e){return E.a.post(v,e).then((function(e){return e.data}))},j=function(e){return E.a.delete("".concat(v,"/").concat(e))},g=function(e,n){return E.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},C=(t(40),function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(i.a)(c,2),b=f[0],p=f[1],E=Object(a.useState)(null),v=Object(i.a)(E,2),C=v[0],k=v[1],P=Object(a.useState)(null),y=Object(i.a)(P,2),S=y[0],I=y[1],L=Object(a.useState)({name:"",number:""}),N=Object(i.a)(L,2),T=N[0],A=N[1];Object(a.useEffect)((function(){w().then((function(e){u(e)}))}),[]);var J=function(e){var n=e.target,t=n.name,a=n.value;"filter"===t?p(a):A(Object(o.a)(Object(o.a)({},T),{},Object(l.a)({},t,a)))},V=b?t.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})):t;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Phonebook"),r.a.createElement(h,{error:S,success:C}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(s,{newPerson:T,handleSubmit:function(e){e.preventDefault();var n=T.name,a=T.number;if(!n||!a)return alert("One or more fields are empty");var r={name:n,number:a},c=t.find((function(e){return e.name.toLowerCase()===n.toLowerCase()}));if(c&&c.number!==a){if(!window.confirm("".concat(c.name," is already added to phonebook, replace the old number with a new one?")))return;g(c.id,r).then((function(e){u(t.map((function(n){return n.id===e.id?e:n}))),k("Phone number of ".concat(e.name," changed successfully")),setTimeout((function(){return k(null)}),2e3)})).catch((function(e){u(t.filter((function(e){return e.id!==c.id}))),I("the person '".concat(c.name,"' was already deleted from server")),console.log(e),setTimeout((function(){return I(null)}),2e3)}))}else{if(c&&c.number===a)return alert("".concat(c.name," is already in the phonebook"));O(r).then((function(e){u(t.concat(e)),A({name:"",number:""}),k("Added ".concat(e.name," to phonebook")),setTimeout((function(){return k(null)}),2e3)}))}},handleInputChange:J}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(m,{searchValue:b,handleInputChange:J}),r.a.createElement(d,{filteredPersons:V,deletePerson:function(e){j(e).then((function(){w().then((function(e){u(e)}))}))}}))});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.58129c17.chunk.js.map